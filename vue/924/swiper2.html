<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no"/>
    <title>轮播图</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.4.2/css/swiper.min.css">
    <style>
        [v-cloak]{
            display: none;
        }
        .swiper-main{width:100%;height:300px}
        .swiper-main .swiper-container{width:100%;height:100%}
        .swiper-main .swiper-container img{width:100%;height:100%}


    </style>


</head>
<div id="app" v-cloak=""></div>
<body>
<script src="js/jquery.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.4.2/js/swiper.min.js"></script>
<script src="js/vue.js"></script>
<script>


    let App={
        template:`
        <div class="swiper-main">
            <div ref="swiper-container" class="swiper-container">
                <div class="swiper-wrapper">
                    <div class="swiper-slide" v-for="(item,index) in slides " :key="index"><img :src="item.image" alt=""></div>

                </div>
                <div ref="swiper-pagination" class="swiper-pagination"></div>
            </div>

        </div>

         `,
        data(){
          return {
              slides:[

              ]
          }
        },
        created(){
            $.ajax({
                url:"http://vueshop.glbuys.com/api/home/index/slide?token=1ec949a15fb709370f",
                type:"get",
                dataType:"json",
                success:(res)=>{
                    console.log(res)
                    if(res.code==200){
                        this.slides=res.data;
                        setTimeout(()=>{
                            var mySwiper = new Swiper(this.$refs["swiper-container"], {
                                autoplay: 2000,//可选选项，自动滑动
                                pagination : this.$refs["swiper-pagination"],
                                paginationClickable :true,
                                autoplayDisableOnInteraction : false,
                            })
                        },100)
//                        this.$nextTick(()=>{
//                            var mySwiper = new Swiper(this.$refs["swiper-container"], {
//                                autoplay: 2000,//可选选项，自动滑动
//                                pagination : this.$refs["swiper-pagination"],
//                                paginationClickable :true,
//                                autoplayDisableOnInteraction : false,
//                            })
//                        })
                    }
                },


            })
        },
        mounted(){

        }
    }
    new Vue({
        el:"#app",
        template:`
            <div><App></App></div>
        `,
        components:{
            App
        }
    })

</script>

</body>
</html>